<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable settings</title>
    
    <style>
        body
        {
            font-family: Roboto Regular, Arial, Helvetica, sans-serif;
        }
        
        h1
        {
            font-size: 1.5em;
        }
        
        button
        {
            margin: 10px;
            padding: 5px 25px;
            
            color: black;
            
            border: none;
            border-radius: 3px;
            outline: none;
            
            background-color: unset;
        }
        
        select
        {
            margin: 5px 0;
            padding: 10px;
        }
        
        button.success
        {
            color: white;
            background-color: #4a8a3a;
        }
        
        button.icon
        {
            margin: 5px;
            padding: unset;
            color: #494949;
        }
        
        #timetable
        {
            display: flex;
        }
        
        .collumn
        {
            display: flex;
            flex-direction: column;
            align-items: center;
            
            width: 170px;
        }
    </style>
</head>
<body>
    <div id="timetable">
        <? var headers = { monday: "Pondelok", tuesday: "Utorok", wednesday: "Streda", thursday: "Štvrtok", friday: "Piatok", saturday: "Sobota", sunday: "Nedeľa" }; ?>
        <? for(const property in timetable) { ?>
            <div class="collumn">
                <h1><?= headers[property] ?></h1>
                <div id="<?= property ?>>" class="collumn">
                    <? for (var i = 0; i < timetable[property].length; i++) { ?>
                        <span>
                            <?= timetable[property][i].string ?>
                            <button class="icon" onclick="removeSession('<?= property ?>', '<?= timetable[property][i].string ?>')">X</button>
                        </span>
                    <? } ?>
                </div>
                <select id="<?= property ?>Select">
                    <? for (var i = 0; i < times.length; i++) { ?>
                        <option>
                            <?= times[i].string ?>
                        </option>
                    <? } ?>
                </select>
                <button class="success" onclick="addSession('<?= property ?>')">Add</button>
            </div>
        <? } ?>
    </div>
    
    <script>
        function addSession(day)
        {
            let sessionTime = document.getElementById(day + "Select").value;
            console.log(day, sessionTime);

            google.script.run.withSuccessHandler(
                (result) =>
                {
                    console.log(result);
                }
            )
            .withFailureHandler(console.log)
            .addTimeToTimetable(day, sessionTime);
        }

        function removeSession(day, sessionTime)
        {
            console.log(day, sessionTime)

            google.script.run.withSuccessHandler(
                (result) =>
                {
                    console.log(result);
                }
            )
            .withFailureHandler(console.log)
            .removeTimeFromTimetable(day, sessionTime);
        }
    </script>
</body>
</html>